{% doc %}
  Testimonials Grid Block

  A responsive grid of customer testimonials with photos,
  ratings, and social proof elements for landing pages.
{% enddoc %}

{% assign testimonials_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .testimonials-grid-{{ testimonials_id }} {
    background: {{ block.settings.background_color }};
    padding: {{ block.settings.padding }}px 20px;
  }

  .testimonials-container-{{ testimonials_id }} {
    max-width: {{ block.settings.max_width }}px;
    margin: 0 auto;
  }

  .testimonials-header-{{ testimonials_id }} {
    text-align: center;
    margin-bottom: {{ block.settings.section_spacing }}px;
  }

  .testimonials-title-{{ testimonials_id }} {
    font-size: {{ block.settings.title_size }}px;
    font-weight: {{ block.settings.title_weight }};
    color: {{ block.settings.title_color }};
    margin: 0 0 {{ block.settings.content_spacing }}px 0;
    line-height: 1.3;
  }

  .testimonials-subtitle-{{ testimonials_id }} {
    font-size: {{ block.settings.subtitle_size }}px;
    color: {{ block.settings.subtitle_color }};
    margin: 0;
    line-height: 1.5;
    max-width: 600px;
    margin: 0 auto;
  }

  .testimonials-grid-{{ testimonials_id }} {
    display: grid;
    grid-template-columns: repeat({{ block.settings.columns_desktop }}, 1fr);
    gap: {{ block.settings.grid_gap }}px;
    margin-top: {{ block.settings.section_spacing }}px;
  }

  .testimonial-card-{{ testimonials_id }} {
    background: {{ block.settings.card_background }};
    border-radius: {{ block.settings.card_border_radius }}px;
    padding: {{ block.settings.card_padding }}px;
    border: {{ block.settings.card_border_width }}px solid {{ block.settings.card_border_color }};
    box-shadow: {{ block.settings.card_shadow }};
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
  }

  .testimonial-card-{{ testimonials_id }}:hover {
    transform: translateY(-{{ block.settings.card_hover_lift }}px);
    box-shadow: 0 12px 40px rgba(0,0,0,0.1);
  }

  .testimonial-rating-{{ testimonials_id }} {
    display: flex;
    gap: 2px;
    margin-bottom: {{ block.settings.content_spacing }}px;
  }

  .testimonial-star-{{ testimonials_id }} {
    width: 16px;
    height: 16px;
    fill: {{ block.settings.star_color }};
  }

  .testimonial-quote-{{ testimonials_id }} {
    font-size: {{ block.settings.quote_size }}px;
    color: {{ block.settings.quote_color }};
    line-height: 1.6;
    margin: 0 0 {{ block.settings.content_spacing }}px 0;
    flex: 1;
    font-style: italic;
    position: relative;
  }

  .testimonial-quote-{{ testimonials_id }}::before {
    content: '"';
    font-size: 3em;
    color: {{ block.settings.quote_mark_color }};
    position: absolute;
    top: -10px;
    left: -15px;
    line-height: 1;
  }

  .testimonial-author-{{ testimonials_id }} {
    display: flex;
    align-items: center;
    gap: {{ block.settings.content_spacing }}px;
    margin-top: auto;
    padding-top: {{ block.settings.content_spacing }}px;
    border-top: 1px solid {{ block.settings.divider_color }};
  }

  .testimonial-avatar-{{ testimonials_id }} {
    width: {{ block.settings.avatar_size }}px;
    height: {{ block.settings.avatar_size }}px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid {{ block.settings.avatar_border_color }};
    flex-shrink: 0;
  }

  .testimonial-avatar-placeholder-{{ testimonials_id }} {
    width: {{ block.settings.avatar_size }}px;
    height: {{ block.settings.avatar_size }}px;
    border-radius: 50%;
    background: {{ block.settings.avatar_placeholder_bg }};
    display: flex;
    align-items: center;
    justify-content: center;
    color: {{ block.settings.avatar_placeholder_color }};
    font-weight: 600;
    font-size: {{ block.settings.avatar_size | times: 0.3 | round }}px;
    border: 2px solid {{ block.settings.avatar_border_color }};
    flex-shrink: 0;
  }

  .testimonial-author-info-{{ testimonials_id }} {
    flex: 1;
  }

  .testimonial-author-name-{{ testimonials_id }} {
    font-size: {{ block.settings.author_name_size }}px;
    font-weight: {{ block.settings.author_name_weight }};
    color: {{ block.settings.author_name_color }};
    margin: 0 0 4px 0;
    line-height: 1.2;
  }

  .testimonial-author-title-{{ testimonials_id }} {
    font-size: {{ block.settings.author_title_size }}px;
    color: {{ block.settings.author_title_color }};
    margin: 0;
    line-height: 1.2;
    font-style: italic;
  }

  .testimonial-verified-{{ testimonials_id }} {
    position: absolute;
    top: 12px;
    right: 12px;
    background: {{ block.settings.verified_bg }};
    color: {{ block.settings.verified_color }};
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  @media screen and (max-width: 749px) {
    .testimonials-grid-{{ testimonials_id }} {
      grid-template-columns: repeat({{ block.settings.columns_mobile }}, 1fr);
      gap: {{ block.settings.grid_gap | times: 0.5 }}px;
    }

    .testimonials-grid-{{ testimonials_id }} {
      padding: {{ block.settings.padding | times: 0.8 }}px 20px;
    }

    .testimonial-card-{{ testimonials_id }} {
      padding: {{ block.settings.card_padding | times: 0.8 }}px;
    }

    .testimonial-quote-{{ testimonials_id }} {
      font-size: {{ block.settings.quote_size | times: 0.9 }}px;
    }

    .testimonial-author-name-{{ testimonials_id }} {
      font-size: {{ block.settings.author_name_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<div class="testimonials-grid-{{ testimonials_id }}" {{ block.shopify_attributes }}>
  <div class="testimonials-container-{{ testimonials_id }}">
    <div class="testimonials-header-{{ testimonials_id }}">
      {% if block.settings.title != blank %}
        <h2 class="testimonials-title-{{ testimonials_id }}">{{ block.settings.title }}</h2>
      {% endif %}

      {% if block.settings.subtitle != blank %}
        <p class="testimonials-subtitle-{{ testimonials_id }}">{{ block.settings.subtitle }}</p>
      {% endif %}
    </div>

    <div class="testimonials-grid-{{ testimonials_id }}">
      {% for testimonial in block.settings.testimonials %}
        <div class="testimonial-card-{{ testimonials_id }}">
          {% if testimonial.verified %}
            <div class="testimonial-verified-{{ testimonials_id }}">Verified</div>
          {% endif %}

          {% if testimonial.rating > 0 %}
            <div class="testimonial-rating-{{ testimonials_id }}">
              {% for i in (1..5) %}
                {% if i <= testimonial.rating %}
                  <svg class="testimonial-star-{{ testimonials_id }}" viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                {% else %}
                  <svg class="testimonial-star-{{ testimonials_id }}" viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" opacity="0.3"/>
                  </svg>
                {% endif %}
              {% endfor %}
            </div>
          {% endif %}

          {% if testimonial.quote != blank %}
            <blockquote class="testimonial-quote-{{ testimonials_id }}">
              {{ testimonial.quote }}
            </blockquote>
          {% endif %}

          <div class="testimonial-author-{{ testimonials_id }}">
            {% if testimonial.image %}
              <img
                src="{{ testimonial.image | image_url: width: 100 }}"
                alt="{{ testimonial.name | escape }}"
                class="testimonial-avatar-{{ testimonials_id }}"
                loading="lazy"
                width="48"
                height="48"
              >
            {% else %}
              <div class="testimonial-avatar-placeholder-{{ testimonials_id }}">
                {{ testimonial.name | slice: 0, 1 | upcase }}
              </div>
            {% endif %}

            <div class="testimonial-author-info-{{ testimonials_id }}">
              {% if testimonial.name != blank %}
                <h4 class="testimonial-author-name-{{ testimonials_id }}">{{ testimonial.name }}</h4>
              {% endif %}

              {% if testimonial.title != blank %}
                <p class="testimonial-author-title-{{ testimonials_id }}">{{ testimonial.title }}</p>
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Testimonials Grid",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 800,
      "max": 1400,
      "step": 100,
      "unit": "px",
      "label": "Maximum Width",
      "default": 1200
    },
    {
      "type": "range",
      "id": "padding",
      "min": 20,
      "max": 100,
      "step": 10,
      "unit": "px",
      "label": "Section Padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 1,
      "max": 4,
      "step": 1,
      "unit": "",
      "label": "Columns on Desktop",
      "default": 3
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "min": 1,
      "max": 2,
      "step": 1,
      "unit": "",
      "label": "Columns on Mobile",
      "default": 1
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 16,
      "max": 48,
      "step": 4,
      "unit": "px",
      "label": "Grid Gap",
      "default": 24
    },
    {
      "type": "header",
      "content": "Header"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "What Our Community Says"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Section Subtitle",
      "default": "Join thousands of women who trust Morea for their activewear needs"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f9fafb"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 20,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Title Size",
      "default": 32
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Title Weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "600"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#111827"
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Subtitle Size",
      "default": 16
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Subtitle Color",
      "default": "#6b7280"
    },
    {
      "type": "header",
      "content": "Card Design"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card Background",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Card Border Radius",
      "default": 12
    },
    {
      "type": "range",
      "id": "card_padding",
      "min": 16,
      "max": 32,
      "step": 4,
      "unit": "px",
      "label": "Card Padding",
      "default": 24
    },
    {
      "type": "range",
      "id": "card_border_width",
      "min": 0,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Card Border Width",
      "default": 1
    },
    {
      "type": "color",
      "id": "card_border_color",
      "label": "Card Border Color",
      "default": "#e5e7eb"
    },
    {
      "type": "select",
      "id": "card_shadow",
      "label": "Card Shadow",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "0 2px 8px rgba(0,0,0,0.1)",
          "label": "Light"
        },
        {
          "value": "0 4px 16px rgba(0,0,0,0.12)",
          "label": "Medium"
        },
        {
          "value": "0 8px 32px rgba(0,0,0,0.15)",
          "label": "Heavy"
        }
      ],
      "default": "0 2px 8px rgba(0,0,0,0.1)"
    },
    {
      "type": "range",
      "id": "card_hover_lift",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Card Hover Lift",
      "default": 4
    },
    {
      "type": "header",
      "content": "Testimonial Content"
    },
    {
      "type": "range",
      "id": "quote_size",
      "min": 14,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Quote Size",
      "default": 16
    },
    {
      "type": "color",
      "id": "quote_color",
      "label": "Quote Color",
      "default": "#374151"
    },
    {
      "type": "color",
      "id": "quote_mark_color",
      "label": "Quote Mark Color",
      "default": "#e5e7eb"
    },
    {
      "type": "color",
      "id": "star_color",
      "label": "Star Color",
      "default": "#fbbf24"
    },
    {
      "type": "header",
      "content": "Author"
    },
    {
      "type": "range",
      "id": "avatar_size",
      "min": 32,
      "max": 64,
      "step": 4,
      "unit": "px",
      "label": "Avatar Size",
      "default": 48
    },
    {
      "type": "color",
      "id": "avatar_border_color",
      "label": "Avatar Border Color",
      "default": "#e5e7eb"
    },
    {
      "type": "color",
      "id": "avatar_placeholder_bg",
      "label": "Avatar Placeholder Background",
      "default": "#f3f4f6"
    },
    {
      "type": "color",
      "id": "avatar_placeholder_color",
      "label": "Avatar Placeholder Text Color",
      "default": "#6b7280"
    },
    {
      "type": "range",
      "id": "author_name_size",
      "min": 14,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Author Name Size",
      "default": 16
    },
    {
      "type": "select",
      "id": "author_name_weight",
      "label": "Author Name Weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "600"
    },
    {
      "type": "color",
      "id": "author_name_color",
      "label": "Author Name Color",
      "default": "#111827"
    },
    {
      "type": "range",
      "id": "author_title_size",
      "min": 12,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Author Title Size",
      "default": 14
    },
    {
      "type": "color",
      "id": "author_title_color",
      "label": "Author Title Color",
      "default": "#6b7280"
    },
    {
      "type": "color",
      "id": "divider_color",
      "label": "Divider Color",
      "default": "#e5e7eb"
    },
    {
      "type": "color",
      "id": "verified_bg",
      "label": "Verified Badge Background",
      "default": "#10b981"
    },
    {
      "type": "color",
      "id": "verified_color",
      "label": "Verified Badge Text Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Testimonials"
    },
    {
      "type": "textarea",
      "id": "testimonials",
      "label": "Testimonials (JSON format)",
      "info": "Enter testimonials in JSON format. Example: [{\"name\":\"Sarah\",\"title\":\"Fitness Enthusiast\",\"quote\":\"Amazing quality!\",\"rating\":5,\"verified\":true}]",
      "default": "[{\"name\":\"Sarah A.\",\"title\":\"Fitness Enthusiast\",\"quote\":\"Finally found activewear that aligns with my values! The coverage is perfect and the material is so comfortable during workouts.\",\"rating\":5,\"verified\":true},{\"name\":\"Fatima K.\",\"title\":\"Yoga Instructor\",\"quote\":\"Love the modest design and quality. Perfect for my daily runs and yoga practice. Highly recommend!\",\"rating\":5,\"verified\":true},{\"name\":\"Amina R.\",\"title\":\"Mother of 3\",\"quote\":\"The fit is amazing and it stays in place during intense workouts. Morea has become my go-to activewear brand.\",\"rating\":5,\"verified\":true}]"
    },
    {
      "type": "range",
      "id": "content_spacing",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Content Spacing",
      "default": 16
    },
    {
      "type": "range",
      "id": "section_spacing",
      "min": 20,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Section Spacing",
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "Testimonials Grid"
    }
  ]
}
{% endschema %}
